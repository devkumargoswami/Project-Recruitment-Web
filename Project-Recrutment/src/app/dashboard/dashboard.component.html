<!-- dashboard.component.html -->
<div class="app" [class.sidebar-open]="sidebarOpen">

  <!-- SIDEBAR -->
  <aside class="sidebar" [class.open]="sidebarOpen">
    <div class="brand">
      <div class="brand-icon">&#x1F3E2;</div>
      <div class="brand-text">
        <div class="brand-name">HRPro</div>
        <div class="brand-sub">Dashboard</div>
      </div>
    </div>

    <div class="user-mini">
      <div class="avatar" [style.background]="roleConfig.grad">{{ getInitials(user?.name) }}</div>
      <div class="user-info">
        <div class="u-name">{{ user?.name }}</div>
        <div class="u-role" [style.color]="roleConfig.color">{{ currentRole }}</div>
      </div>
    </div>

    <nav class="nav">
      <ng-container *ngFor="let item of filteredNavItems">
        <div class="nav-divider" *ngIf="item.divider">{{ item.dlabel }}</div>
        <button *ngIf="!item.divider" class="nav-item" [class.active]="currentSection === item.id"
          [style.--role-color]="roleConfig.color" (click)="showSection(item.id!)">
          <span class="nav-icon">{{ item.icon }}</span>
          <span class="nav-label">{{ item.label }}</span>
          <span class="nav-bar" *ngIf="currentSection === item.id"></span>
        </button>
      </ng-container>
    </nav>

    <div class="sidebar-footer">
      <button class="btn-footer" (click)="refresh()">&#x21BB; Refresh</button>
      <button class="btn-footer btn-logout" (click)="logout()">&#x23FB; Logout</button>
    </div>
  </aside>

  <div class="overlay" [class.show]="sidebarOpen" (click)="closeSidebar()"></div>

  <!-- MAIN -->
  <main class="main">
    <header class="topbar">
      <div class="topbar-left">
        <button class="hamburger" (click)="openSidebar()">&#x2630;</button>
        <h1 class="page-title">{{ currentSectionTitle }}</h1>
      </div>
      <div class="topbar-right">
        <span class="badge" [ngClass]="roleConfig.badge">{{ currentRole }}</span>
        <button class="btn-primary" *ngIf="currentActionText" (click)="handleTopAction()">
          {{ currentActionText }}
        </button>
      </div>
    </header>

    <div class="loading-wrap" *ngIf="loading">
      <div class="spinner"></div>
      <p>Loading...</p>
    </div>

    <div class="content" *ngIf="!loading">

      <!-- ====== PROFILE ====== -->
      <section *ngIf="currentSection === 'profile'" class="section fade-in">

        <div class="profile-hero">
          <div class="avatar-lg" [style.background]="roleConfig.grad">
            {{ getInitials(user?.name) }}
          </div>
          <div class="profile-meta">
            <h2>{{ user?.firstName }} {{ user?.lastName }}</h2>
            <div class="p-username" *ngIf="user?.username">
              &#64;<span>{{ user?.username }}</span>
            </div>
            <div class="p-email">{{ user?.email }}</div>
            <div class="pill-row">
              <span class="badge" [ngClass]="roleConfig.badge">{{ currentRole }}</span>
              <span class="badge badge-green">{{ user?.status || 'Active' }}</span>
              <span class="badge badge-muted" *ngIf="user?.gender">{{ user?.gender }}</span>
            </div>
          </div>
          <button class="btn-edit-profile" (click)="handleTopAction()">Edit Profile</button>
        </div>

        <div class="stats-row">
          <div class="stat-card" *ngFor="let s of roleConfig.stats" (click)="showSection(s.toLowerCase())">
            <div class="stat-num" [style.color]="roleConfig.color">{{ getStatCount(s) }}</div>
            <div class="stat-lbl">{{ s }}</div>
          </div>
        </div>

        <div class="profile-grid">

          <div class="info-card">
            <div class="info-head">Personal Information</div>
            <div class="info-row">
              <span class="info-lbl">First Name</span>
              <span>{{ user?.firstName || '—' }}</span>
            </div>
            <div class="info-row">
              <span class="info-lbl">Last Name</span>
              <span>{{ user?.lastName || '—' }}</span>
            </div>
            <div class="info-row">
              <span class="info-lbl">Username</span>
              <span>{{ user?.username || '—' }}</span>
            </div>
            <div class="info-row">
              <span class="info-lbl">Gender</span>
              <span>{{ user?.gender || '—' }}</span>
            </div>
            <div class="info-row">
              <span class="info-lbl">Date of Birth</span>
              <span>{{ (user?.dataOfBirth | date:'dd MMM yyyy') || '—' }}</span>
            </div>
            <div class="info-row">
              <span class="info-lbl">Phone Number</span>
              <span>{{ user?.phonenumber || '—' }}</span>
            </div>
          </div>

          <div class="info-card">
            <div class="info-head">Contact and Location</div>
            <div class="info-row">
              <span class="info-lbl">Email</span>
              <span>{{ user?.email || '—' }}</span>
            </div>
            <div class="info-row">
              <span class="info-lbl">Address</span>
              <span>{{ user?.address || '—' }}</span>
            </div>
            <div class="info-row">
              <span class="info-lbl">City</span>
              <span>{{ user?.city || '—' }}</span>
            </div>
            <div class="info-row">
              <span class="info-lbl">State</span>
              <span>{{ user?.stateId != null ? user?.stateId : '—' }}</span>
            </div>
            <div class="info-row">
              <span class="info-lbl">Country</span>
              <span>{{ user?.countryId != null ? user?.countryId : '—' }}</span>
            </div>
          </div>

          <div class="info-card">
            <div class="info-head">Account Details</div>
            <div class="info-row">
              <span class="info-lbl">User ID</span>
              <span>#{{ user?.id }}</span>
            </div>
            <div class="info-row">
              <span class="info-lbl">Role</span>
              <span><span class="badge" [ngClass]="roleConfig.badge">{{ currentRole }}</span></span>
            </div>
            <div class="info-row">
              <span class="info-lbl">Role ID</span>
              <span>{{ user?.roleId }}</span>
            </div>
            <div class="info-row">
              <span class="info-lbl">Status</span>
              <span>
                <span class="status-dot dot-green"></span>
                {{ user?.status || 'Active' }}
              </span>
            </div>
            <div class="info-row">
              <span class="info-lbl">Member Since</span>
              <span>{{ (user?.createdDateTime | date:'dd MMM yyyy') || '—' }}</span>
            </div>
          </div>

          <div class="info-card">
            <div class="info-head">Professional Details</div>
            <div class="info-row">
              <span class="info-lbl">Total Experience</span>
              <span *ngIf="user?.totalExperience != null">
                {{ user?.totalExperience }} yr<ng-container *ngIf="user?.totalExperience !== 1">s</ng-container>
              </span>
              <span *ngIf="user?.totalExperience == null">—</span>
            </div>
            <div class="info-row">
              <span class="info-lbl">Offer CTC</span>
              <span *ngIf="user?.offerCTC != null">{{ user?.offerCTC | number }}</span>
              <span *ngIf="user?.offerCTC == null">—</span>
            </div>
          </div>

        </div>
      </section>

      <!-- ====== EDUCATION ====== -->
      <section *ngIf="currentSection === 'education'" class="section fade-in">
        <div class="card">
          <div class="card-head">
            <h3>Education Records</h3>
            <button class="btn-add" (click)="goToEducation()">+ Add Education</button>
          </div>
          <div class="empty-state" *ngIf="educationList.length === 0">
            <div class="empty-icon">&#x1F393;</div>
            <p>No education records yet.</p>
            <button class="btn-primary" (click)="goToEducation()">Add your first record</button>
          </div>
          <div class="table-wrap" *ngIf="educationList.length > 0">
            <table>
              <thead>
                <tr>
                  <th>#</th>
                  <th>Title</th>
                  <th>Institution</th>
                  <th>Board</th>
                  <th>Year</th>
                  <th>Update</th>
                  <th>Delete</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let edu of educationList; trackBy: trackById; let i = index"
                  [class.deleting]="deletingId === edu.id">
                  <td class="td-num">{{ i + 1 }}</td>
                  <td class="td-main">{{ edu.title }}</td>
                  <td>{{ edu.institution }}</td>
                  <td>{{ edu.board || '—' }}</td>
                  <td>{{ edu.duration || edu.year }}</td>
                  <td class="td-action-col">
                    <button class="btn-action btn-update" (click)="editEducation(edu.id)">Update</button>
                  </td>
                  <td class="td-action-col">
                    <button class="btn-action btn-delete" [disabled]="deletingId === edu.id"
                      (click)="deleteEducation(edu.id)">
                      {{ deletingId === edu.id ? '...' : 'Delete' }}
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- ====== SKILLS ====== -->
      <section *ngIf="currentSection === 'skills'" class="section fade-in">
        <div class="card">
          <div class="card-head">
            <h3>Skills</h3>
            <button class="btn-add" (click)="goToSkills()">+ Add Skill</button>
          </div>
          <div class="empty-state" *ngIf="skillsList.length === 0">
            <div class="empty-icon">&#x2699;</div>
            <p>No skills added yet.</p>
            <button class="btn-primary" (click)="goToSkills()">Add your first skill</button>
          </div>
          <div class="table-wrap" *ngIf="skillsList.length > 0">
            <table>
              <thead>
                <tr>
                  <th>#</th>
                  <th>Skill Name</th>
                  <th>Level</th>
                  <th>Proficiency</th>
                  <th>Update</th>
                  <th>Delete</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let sk of skillsList; trackBy: trackById; let i = index"
                  [class.deleting]="deletingId === sk.id">
                  <td class="td-num">{{ i + 1 }}</td>
                  <td class="td-main">{{ sk.name }}</td>
                  <td>
                    <span class="level-badge" [style.color]="getSkillLevelColor(sk.level)"
                      [style.border-color]="getSkillLevelColor(sk.level)">
                      {{ sk.level }}
                    </span>
                  </td>
                  <td class="td-bar">
                    <div class="skill-bar-wrap">
                      <div class="skill-bar-fill" [style.width]="getSkillLevelWidth(sk.level)"
                        [style.background]="getSkillLevelColor(sk.level)">
                      </div>
                    </div>
                  </td>
                  <td class="td-action-col">
                    <button class="btn-action btn-update" (click)="editSkill(sk.id)">Update</button>
                  </td>
                  <td class="td-action-col">
                    <button class="btn-action btn-delete" [disabled]="deletingId === sk.id"
                      (click)="deleteSkill(sk.id)">
                      {{ deletingId === sk.id ? '...' : 'Delete' }}
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- ====== EXPERIENCE ====== -->
      <section *ngIf="currentSection === 'experience'" class="section fade-in">
        <div class="card">
          <div class="card-head">
            <h3>Work Experience</h3>
            <button class="btn-add" (click)="goToExperience()">+ Add Experience</button>
          </div>
          <div class="empty-state" *ngIf="experienceList.length === 0">
            <div class="empty-icon">&#x1F4BC;</div>
            <p>No experience records yet.</p>
            <button class="btn-primary" (click)="goToExperience()">Add your first experience</button>
          </div>
          <div class="table-wrap" *ngIf="experienceList.length > 0">
            <table>
              <thead>
                <tr>
                  <th>#</th>
                  <th>Position</th>
                  <th>Company</th>
                  <th>Duration</th>
                  <th>Description</th>
                  <th>Update</th>
                  <th>Delete</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let exp of experienceList; trackBy: trackById; let i = index"
                  [class.deleting]="deletingId === exp.id">
                  <td class="td-num">{{ i + 1 }}</td>
                  <td class="td-main">{{ exp.position }}</td>
                  <td>{{ exp.company }}</td>
                  <td class="td-muted">{{ exp.duration }}</td>
                  <td class="td-desc">{{ exp.description || '—' }}</td>
                  <td class="td-action-col">
                    <button class="btn-action btn-update" (click)="editExperience(exp.id)">Update</button>
                  </td>
                  <td class="td-action-col">
                    <button class="btn-action btn-delete" [disabled]="deletingId === exp.id"
                      (click)="deleteExperience(exp.id)">
                      {{ deletingId === exp.id ? '...' : 'Delete' }}
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- ====== DOCUMENTS ====== -->
      <section *ngIf="currentSection === 'documents'" class="section fade-in">
        <div class="card">
          <div class="card-head">
            <h3>Documents</h3>
            <button class="btn-add" (click)="goToDocuments()">+ Upload Document</button>
          </div>
          <div class="empty-state" *ngIf="documentList.length === 0">
            <div class="empty-icon">&#x1F4C4;</div>
            <p>No documents uploaded yet.</p>
            <button class="btn-primary" (click)="goToDocuments()">Upload your first document</button>
          </div>
          <div class="table-wrap" *ngIf="documentList.length > 0">
            <table>
              <thead>
                <tr>
                  <th>#</th>
                  <th>Name</th>
                  <th>Type</th>
                  <th>Uploaded</th>
                  <th>View</th>
                  <th>Update</th>
                  <th>Delete</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let doc of documentList; trackBy: trackById; let i = index"
                  [class.deleting]="deletingId === doc.id">
                  <td class="td-num">{{ i + 1 }}</td>
                  <td class="td-main">{{ doc.name }}</td>
                  <td><span class="type-tag">{{ doc.type }}</span></td>
                  <td class="td-muted">{{ doc.uploadedAt | date:'dd MMM yyyy' }}</td>
                  <td class="td-action-col">
                    <a *ngIf="doc.url" [href]="doc.url" target="_blank" class="btn-action btn-view">View</a>
                    <span *ngIf="!doc.url" class="td-muted">—</span>
                  </td>
                  <td class="td-action-col">
                    <button class="btn-action btn-update" (click)="editDocument(doc.id)">Update</button>
                  </td>
                  <td class="td-action-col">
                    <button class="btn-action btn-delete" [disabled]="deletingId === doc.id"
                      (click)="deleteDocument(doc.id)">
                      {{ deletingId === doc.id ? '...' : 'Delete' }}
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- ====== ALL USERS (Admin / HR only) ====== -->
      <section *ngIf="currentSection === 'users' && isAdminOrHR()" class="section fade-in">
        <div class="card">
          <div class="card-head">
            <h3>All Users</h3>
            <button class="btn-add btn-add-danger" (click)="goToAddUser()">+ Add User</button>
          </div>

          <div class="filter-bar">
            <input class="filter-input" placeholder="Search name or email..." [value]="userSearchTerm"
              (input)="onUserSearch($event)">
            <select class="filter-sel" [value]="userRoleFilter" (change)="onRoleFilter($event)">
              <option value="">All Roles</option>
              <option>Admin</option>
              <option>HR</option>
              <option>Employer</option>
              <option>Candidate</option>
            </select>
            <select class="filter-sel" [value]="userStatusFilter" (change)="onStatusFilter($event)">
              <option value="">All Status</option>
              <option>Active</option>
              <option>Inactive</option>
              <option>Pending</option>
            </select>
            <span class="result-count">
              {{ filteredUsers.length }} user{{ filteredUsers.length !== 1 ? 's' : '' }}
            </span>
          </div>

          <div class="empty-state" *ngIf="filteredUsers.length === 0">
            <div class="empty-icon">&#x1F465;</div>
            <p>{{ allUsers.length === 0 ? 'No users found.' : 'No users match your filters.' }}</p>
          </div>

          <div class="table-wrap" *ngIf="filteredUsers.length > 0">
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Role</th>
                  <th>Status</th>
                  <th>Education</th>
                  <th>Skills</th>
                  <th>Experience</th>
                  <th>Documents</th>
                  <th>Update</th>
                  <th>Delete</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let u of filteredUsers; trackBy: trackById">
                  <td class="td-num">#{{ u.id }}</td>
                  <td>
                    <div class="user-cell">
                      <div class="avatar-xs" [style.background]="ROLE_CONFIG[u.role].grad || '#555'">
                        {{ getInitials(u.name) }}
                      </div>
                      <span class="td-main">{{ u.name }}</span>
                    </div>
                  </td>
                  <td class="td-muted">{{ u.email }}</td>
                  <td>
                    <span class="badge" [ngClass]="ROLE_CONFIG[u.role].badge || 'badge-green'">
                      {{ u.role }}
                    </span>
                  </td>
                  <td>
                    <span class="status-dot" [class.dot-green]="!u.status || u.status === 'Active'"
                      [class.dot-red]="u.status === 'Inactive'" [class.dot-amber]="u.status === 'Pending'">
                    </span>
                    {{ u.status || 'Active' }}
                  </td>
                  <td class="td-center">
                    <button class="btn-data-link" (click)="viewUserData(u, 'education')">
                      {{ getUserDataCount(u.id, 'education') }} Edu
                    </button>
                  </td>
                  <td class="td-center">
                    <button class="btn-data-link" (click)="viewUserData(u, 'skills')">
                      {{ getUserDataCount(u.id, 'skills') }} Skills
                    </button>
                  </td>
                  <td class="td-center">
                    <button class="btn-data-link" (click)="viewUserData(u, 'experience')">
                      {{ getUserDataCount(u.id, 'experience') }} Exp
                    </button>
                  </td>
                  <td class="td-center">
                    <button class="btn-data-link" (click)="viewUserData(u, 'documents')">
                      {{ getUserDataCount(u.id, 'documents') }} Docs
                    </button>
                  </td>
                  <td class="td-action-col">
                    <button class="btn-action btn-update" (click)="editUser(u.id)">Update</button>
                  </td>
                  <td class="td-action-col">
                    <button class="btn-action btn-delete" [disabled]="deletingId === u.id" (click)="deleteUser(u.id)">
                      {{ deletingId === u.id ? '...' : 'Delete' }}
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Sub-panel for selected user's data -->
        <div class="sub-panel fade-in" *ngIf="selectedUserForData">
          <div class="sub-panel-head">
            <div class="sub-panel-title">
              <span class="avatar-xs" [style.background]="ROLE_CONFIG[selectedUserForData.role].grad || '#555'">
                {{ getInitials(selectedUserForData.name) }}
              </span>
              <strong>{{ selectedUserForData.name }}</strong>
              <span class="sub-tab-label">— {{ toTitleCase(subDataTab) }}</span>
            </div>
            <div class="sub-tab-bar">
              <button *ngFor="let tab of subTabs" class="sub-tab" [class.active]="subDataTab === tab"
                (click)="switchSubTab(tab)">
                {{ toTitleCase(tab) }}
              </button>
            </div>
            <button class="drawer-close" (click)="closeSubPanel()">&#x2715;</button>
          </div>

          <!-- Education sub-table -->
          <div *ngIf="subDataTab === 'education'">
            <div class="empty-state sm" *ngIf="subEducation.length === 0">
              <p>No education records.</p>
            </div>
            <div class="table-wrap" *ngIf="subEducation.length > 0">
              <table>
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Title</th>
                    <th>Institution</th>
                    <th>Board</th>
                    <th>Year</th>
                    <th>Update</th>
                    <th>Delete</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let edu of subEducation; let i = index" [class.deleting]="deletingId === edu.id">
                    <td class="td-num">{{ i + 1 }}</td>
                    <td class="td-main">{{ edu.title }}</td>
                    <td>{{ edu.institution }}</td>
                    <td>{{ edu.board || '—' }}</td>
                    <td>{{ edu.duration || edu.year }}</td>
                    <td class="td-action-col">
                      <button class="btn-action btn-update" (click)="editEducation(edu.id)">Update</button>
                    </td>
                    <td class="td-action-col">
                      <button class="btn-action btn-delete" [disabled]="deletingId === edu.id"
                        (click)="deleteSubEducation(edu.id)">
                        {{ deletingId === edu.id ? '...' : 'Delete' }}
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Skills sub-table -->
          <div *ngIf="subDataTab === 'skills'">
            <div class="empty-state sm" *ngIf="subSkills.length === 0">
              <p>No skills records.</p>
            </div>
            <div class="table-wrap" *ngIf="subSkills.length > 0">
              <table>
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Skill</th>
                    <th>Level</th>
                    <th>Proficiency</th>
                    <th>Update</th>
                    <th>Delete</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let sk of subSkills; let i = index" [class.deleting]="deletingId === sk.id">
                    <td class="td-num">{{ i + 1 }}</td>
                    <td class="td-main">{{ sk.name }}</td>
                    <td>
                      <span class="level-badge" [style.color]="getSkillLevelColor(sk.level)"
                        [style.border-color]="getSkillLevelColor(sk.level)">
                        {{ sk.level }}
                      </span>
                    </td>
                    <td class="td-bar">
                      <div class="skill-bar-wrap">
                        <div class="skill-bar-fill" [style.width]="getSkillLevelWidth(sk.level)"
                          [style.background]="getSkillLevelColor(sk.level)">
                        </div>
                      </div>
                    </td>
                    <td class="td-action-col">
                      <button class="btn-action btn-update" (click)="editSkill(sk.id)">Update</button>
                    </td>
                    <td class="td-action-col">
                      <button class="btn-action btn-delete" [disabled]="deletingId === sk.id"
                        (click)="deleteSubSkill(sk.id)">
                        {{ deletingId === sk.id ? '...' : 'Delete' }}
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Experience sub-table -->
          <div *ngIf="subDataTab === 'experience'">
            <div class="empty-state sm" *ngIf="subExperience.length === 0">
              <p>No experience records.</p>
            </div>
            <div class="table-wrap" *ngIf="subExperience.length > 0">
              <table>
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Position</th>
                    <th>Company</th>
                    <th>Duration</th>
                    <th>Update</th>
                    <th>Delete</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let exp of subExperience; let i = index" [class.deleting]="deletingId === exp.id">
                    <td class="td-num">{{ i + 1 }}</td>
                    <td class="td-main">{{ exp.position }}</td>
                    <td>{{ exp.company }}</td>
                    <td class="td-muted">{{ exp.duration }}</td>
                    <td class="td-action-col">
                      <button class="btn-action btn-update" (click)="editExperience(exp.id)">Update</button>
                    </td>
                    <td class="td-action-col">
                      <button class="btn-action btn-delete" [disabled]="deletingId === exp.id"
                        (click)="deleteSubExperience(exp.id)">
                        {{ deletingId === exp.id ? '...' : 'Delete' }}
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Documents sub-table -->
          <div *ngIf="subDataTab === 'documents'">
            <div class="empty-state sm" *ngIf="subDocuments.length === 0">
              <p>No documents uploaded.</p>
            </div>
            <div class="table-wrap" *ngIf="subDocuments.length > 0">
              <table>
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Uploaded</th>
                    <th>View</th>
                    <th>Update</th>
                    <th>Delete</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let doc of subDocuments; let i = index" [class.deleting]="deletingId === doc.id">
                    <td class="td-num">{{ i + 1 }}</td>
                    <td class="td-main">{{ doc.name }}</td>
                    <td><span class="type-tag">{{ doc.type }}</span></td>
                    <td class="td-muted">{{ doc.uploadedAt | date:'dd MMM yyyy' }}</td>
                    <td class="td-action-col">
                      <a *ngIf="doc.url" [href]="doc.url" target="_blank" class="btn-action btn-view">View</a>
                      <span *ngIf="!doc.url" class="td-muted">—</span>
                    </td>
                    <td class="td-action-col">
                      <button class="btn-action btn-update" (click)="editDocument(doc.id)">Update</button>
                    </td>
                    <td class="td-action-col">
                      <button class="btn-action btn-delete" [disabled]="deletingId === doc.id"
                        (click)="deleteSubDocument(doc.id)">
                        {{ deletingId === doc.id ? '...' : 'Delete' }}
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

        </div>
      </section>

    </div>
  </main>

</div>